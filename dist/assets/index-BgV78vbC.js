const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Banner-DpjA-b9n.js","./vendor-oWgAp0Sa.js","./lottie-B53jbFiN.js","./Banner-DAFjbt3V.css","./Auth-DxnLXClh.js","./Auth-D8vA3Ch5.css","./StudentYear-CrZe5v3I.js","./StudentYear-C_c8xxKo.css","./StudentDirection-DEJGv6cu.js","./StudentDirection-CJDet40G.css","./Schedule-7zQhtF0O.js","./Schedule-BXeuzICN.css","./Settings-BKRM2I2D.js","./Settings-BZyMTYQ_.css","./Teacher-DmpYzJur.js","./Teacher-MN9J8WBd.css"])))=>i.map(i=>d[i]);
import{r as u,a as D,B as E,R,b as h,d as L}from"./vendor-oWgAp0Sa.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function c(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=c(r);fetch(r.href,a)}})();var S={exports:{}},j={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O=u,P=Symbol.for("react.element"),B=Symbol.for("react.fragment"),W=Object.prototype.hasOwnProperty,I=O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function T(l,t,c){var n,r={},a=null,o=null;c!==void 0&&(a=""+c),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)W.call(t,n)&&!k.hasOwnProperty(n)&&(r[n]=t[n]);if(l&&l.defaultProps)for(n in t=l.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:P,type:l,key:a,ref:o,props:r,_owner:I.current}}j.Fragment=B;j.jsx=T;j.jsxs=T;S.exports=j;var e=S.exports,A={},v=D;A.createRoot=v.createRoot,A.hydrateRoot=v.hydrateRoot;const C="modulepreload",U=function(l,t){return new URL(l,t).href},b={},_=function(t,c,n){let r=Promise.resolve();if(c&&c.length>0){const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),p=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.allSettled(c.map(i=>{if(i=U(i,n),i in b)return;b[i]=!0;const d=i.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!n)for(let g=o.length-1;g>=0;g--){const x=o[g];if(x.href===i&&(!d||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":C,d||(m.as="script"),m.crossOrigin="",m.href=i,p&&m.setAttribute("nonce",p),document.head.appendChild(m),d)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${i}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return r.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})},Y=()=>{const[l,t]=u.useState({userRole:null,userYear:null,userDirection:null}),[c,n]=u.useState(!0);return u.useEffect(()=>{(()=>{var d;if(!((d=window.Telegram)!=null&&d.WebApp)){n(!1);return}const s=["userRole","userYear","userDirection"];let p=0;const i={userRole:null,userYear:null,userDirection:null};s.forEach(f=>{window.Telegram.WebApp.CloudStorage.getItem(f,(w,m)=>{p++,!w&&m&&(f==="userRole"?i.userRole=m:f==="userYear"?i.userYear=m:f==="userDirection"&&(i.userDirection=m)),p===s.length&&(t(i),n(!1))})})})()},[]),{...l,isLoading:c,saveUserData:(o,s)=>new Promise(p=>{var i;if(!((i=window.Telegram)!=null&&i.WebApp)){p(!1);return}window.Telegram.WebApp.CloudStorage.setItem(o,s,d=>{var f;d?((f=window.Telegram)==null||f.WebApp.showAlert("Ошибка сохранения: "+d),p(!1)):(t(w=>({...w,[o]:s})),p(!0))})}),clearUserData:()=>new Promise(o=>{var i;if(!((i=window.Telegram)!=null&&i.WebApp)){o(!1);return}const s=["userRole","userYear","userDirection"];let p=0;s.forEach(d=>{window.Telegram.WebApp.CloudStorage.setItem(d,"",()=>{p++,p===s.length&&(t({userRole:null,userYear:null,userDirection:null}),o(!0))})})})}},z=()=>{var l;(l=window.Telegram)!=null&&l.WebApp&&(window.Telegram.WebApp.expand(),window.Telegram.WebApp.lockOrientation(),window.Telegram.WebApp.SettingsButton.hide())},Q=(l,t=!0)=>{u.useEffect(()=>{var c;if((c=window.Telegram)!=null&&c.WebApp)return t?(window.Telegram.WebApp.BackButton.show(),window.Telegram.WebApp.BackButton.onClick(l)):window.Telegram.WebApp.BackButton.hide(),()=>{var n,r;(r=(n=window.Telegram)==null?void 0:n.WebApp)==null||r.BackButton.hide()}},[l,t])},y=u.memo(()=>e.jsxs("div",{className:"loading-container",children:[e.jsx("div",{className:"loading-spinner"}),e.jsx("div",{className:"loading-text",children:"Загрузка..."})]}));y.displayName="LoadingSpinner";const N=u.lazy(()=>_(()=>import("./Banner-DpjA-b9n.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),V=u.lazy(()=>_(()=>import("./Auth-DxnLXClh.js"),__vite__mapDeps([4,1,2,5]),import.meta.url)),$=u.lazy(()=>_(()=>import("./StudentYear-CrZe5v3I.js"),__vite__mapDeps([6,1,7]),import.meta.url)),q=u.lazy(()=>_(()=>import("./StudentDirection-DEJGv6cu.js"),__vite__mapDeps([8,1,9]),import.meta.url)),F=u.lazy(()=>_(()=>import("./Schedule-7zQhtF0O.js"),__vite__mapDeps([10,1,2,11]),import.meta.url)),K=u.lazy(()=>_(()=>import("./Settings-BKRM2I2D.js"),__vite__mapDeps([12,1,2,13]),import.meta.url)),J=u.lazy(()=>_(()=>import("./Teacher-DmpYzJur.js"),__vite__mapDeps([14,1,2,15]),import.meta.url));function G(){const{userRole:l,userYear:t,userDirection:c,isLoading:n}=Y();return u.useEffect(()=>{z()},[]),n?e.jsx(y,{}):l?l==="student"&&(!t||!c)?e.jsx(E,{children:e.jsx(u.Suspense,{fallback:e.jsx(y,{}),children:e.jsxs(R,{children:[e.jsx(h,{path:"/",element:e.jsx($,{})}),e.jsx(h,{path:"/direction",element:e.jsx(q,{})})]})})}):e.jsx(E,{children:e.jsx(u.Suspense,{fallback:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontSize:"4vw",color:"var(--text-color)"},children:"Загрузка..."}),children:e.jsxs(R,{children:[e.jsx(h,{path:"/",element:e.jsx(F,{})}),e.jsx(h,{path:"/settings",element:e.jsx(K,{})}),e.jsx(h,{path:"/teacher",element:e.jsx(J,{})})]})})}):e.jsx(E,{children:e.jsx(u.Suspense,{fallback:e.jsx(y,{}),children:e.jsxs(R,{children:[e.jsx(h,{path:"/",element:e.jsx(N,{})}),e.jsx(h,{path:"/auth",element:e.jsx(V,{})})]})})})}A.createRoot(document.getElementById("root")).render(e.jsx(L.StrictMode,{children:e.jsx(G,{})}));export{Q as a,e as j,Y as u};
